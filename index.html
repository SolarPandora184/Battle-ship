gameRef.child("moves").on("child_added", snap => {
    const move = snap.val();

    if (move.to === myId) {
        // Opponent's move, update your board (myGrid) with hits or misses
        const cell = myGrid[move.y][move.x];
        if (cell.hit) return;  // Avoid updating if the cell is already hit/missed

        cell.hit = true;
        if (move.hit) {
            cell.div.classList.add("hit");  // Mark it as a hit
        } else {
            cell.div.classList.add("miss");  // Mark it as a miss
        }

        if (move.hit && checkDefeat(myGrid)) {
            gameOver = true;
            status("You lost!");
        }
    } else if (move.from === myId) {
        // Your move, update opponent's board (opGrid) with hits or misses
        const cell = opGrid[move.y][move.x];
        cell.div.classList.add(move.hit ? "hit" : "miss");
        if (move.hit) status("You hit!");
    }
});
